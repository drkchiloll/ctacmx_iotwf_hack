<html><head>
		<script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script><style type="text/css"></style>
		<link rel="stylesheet" href="examplecss.css" type="text/css" media="screen">
		<title>Train</title>
		<script type="text/javascript">
			$(document).ready(			
				function() {
					// From JavaScript: The good parts - Chapter 6. Arrays, Section 6.7. Dimensions
					Array.matrix = function (m, n, initial) {
					    var a, i, j, mat = [];
					    for (i = 0; i < m; i += 1) {
					        a = [];
					        for (j = 0; j < n; j += 1) {
					            a[j] = 0;
					        }
					        mat[i] = a;
					    }
					    return mat;
					};
				
					var Grids = {};
					
					Grids.CELL_SIZE = 5;
					Grids.X = 600;
					Grids.Y = 180;
					Grids.WIDTH = Grids.X / Grids.CELL_SIZE;
					Grids.HEIGHT = Grids.Y / Grids.CELL_SIZE;
					Grids.DELAY = 500;
					Grids.minimum = 2;
					Grids.maximum = 3;
					Grids.spawn = 3;
					
					Grids.state = Grids.STOPPED;
					Grids.interval = null;
					
					Grids.grid = Array.matrix(Grids.HEIGHT, Grids.WIDTH, 0);
										
					Grids.counter = 0;
									
					Grids.updateState = function() {
						var neighbours;
						
						var nextGenerationGrid = Array.matrix(Grids.HEIGHT, Grids.WIDTH, 0);
						
						for (var h = 0; h < Grids.HEIGHT; h++) {
							for (var w = 0; w < Grids.WIDTH; w++) {
								neighbours = Grids.calculateNeighbours(h, w);
								if (Grids.grid[h][w] !== Grids.DEAD) {
									if ((neighbours >= Grids.minimum) && (neighbours <= Grids.maximum)) {
										nextGenerationGrid[h][w] = Grids.ALIVE;
									}
								} else {
									if (neighbours === Grids.spawn) {
										nextGenerationGrid[h][w] = Grids.ALIVE;
									}
								}
							}
						}
						Grids.copyGrid(nextGenerationGrid, Grids.grid);
						Grids.counter++;
					};
									
					Grids.calculateNeighbours = function(y, x) {				
						var total = (Grids.grid[y][x] !== Grids.DEAD) ? -1 : 0;
						for (var h = -1; h <= 1; h++) {
							for (var w = -1; w <= 1; w++) {
								if (Grids.grid[(Grids.HEIGHT + (y + h)) % Grids.HEIGHT][(Grids.WIDTH + (x + w)) % Grids.WIDTH] !== Grids.DEAD) {
									total++;
								}
							}
						}
						return total;
					};
					
					Grids.copyGrid = function(source, destination) {
						for (var h = 0; h < Grids.HEIGHT; h++) {
							destination[h] = source[h].slice(0);
						}
					};
					function Cell(row, column) {
						this.row = row;
						this.column = column;
					};
					var gridCanvas = document.getElementById('grid');
					var gridCanvas2 = document.getElementById('grid2');	
					var gridCanvas3 = document.getElementById('grid3');					
					
					function updateAnimations() {
						for (var h = 0; h < Grids.HEIGHT; h++) {
							for (var w = 0; w < Grids.WIDTH; w++) {
								if (Grids.grid[h][w] === Grids.ALIVE) {
									context.fillStyle = "#000";									
								} else {
									context.fillStyle = 'rgba(255, 0, 0, 0.01)';
								}
								context.fillRect(
										w * Grids.CELL_SIZE +1, 
										h * Grids.CELL_SIZE +1, 
										Grids.CELL_SIZE -1,
										Grids.CELL_SIZE -1);
							}
						}
						counterSpan.innerHTML = Grids.counter;	
					};
					
					if (gridCanvas.getContext) {
						var context = gridCanvas.getContext('2d');
						var offset = Grids.CELL_SIZE;
					
						for (var x = 0; x <= Grids.X; x += Grids.CELL_SIZE) {
							context.moveTo(0.5 + x, 0);
							context.lineTo(0.5 + x, Grids.Y);
						}
						for (var y = 0; y <= Grids.Y; y += Grids.CELL_SIZE) {
							context.moveTo(0, 0.5 + y);
							context.lineTo(Grids.X, 0.5 + y);
						}
						context.strokeStyle = "#fff";
						context.stroke();
						
					} else {
						alert("Canvas is unsupported in your browser.");
					}
				}
			);
		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-2662092-4']);
		  _gaq.push(['_trackPageview']);
		
		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
		
		</script>
	</head>
	<body><div id="cboxOverlay" style="display: none;"></div>
	<div id="<colorbox" class="" style="padding-bottom: 57px; padding-right: 28px; display: none;">
	
	<div id="false" style="position: absolute; width: 9999px; visibility: hidden; display: none;"></div></div>
		<div id="container">
			<canvas class ="canv1" id="grid" width="180" height="60"></canvas>
				<style>
				canvas.canv1 {
					border-bottom : 1px gray dotted;
				}
				canvas.canv2 {
					border-bottom : 1px gray dotted;
				}
				canvas.canv3 {
					border-bottom : 1px gray dotted;
				}
				</style>
				<canvas class ="canv2" id="grid2" width="600" height="180"></canvas>
				<canvas class ="canv3" id="grid3" width="600" height="180"></canvas>
			        
		</div>
	
</body></html>